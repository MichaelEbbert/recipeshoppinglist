{% extends "base.html" %}

{% block title %}Discover Recipes{% endblock %}

{% block content %}
<div class="discover-page">
    <div class="page-header">
        <h1>Discover New Recipes</h1>
    </div>

    <div class="search-section">
        <form hx-get="/discover/search"
              hx-target="#recipe-results"
              hx-swap="innerHTML"
              hx-indicator="#search-spinner"
              hx-include="#complexity-filter">
            <div class="search-bar">
                <input type="text" name="q">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>

        <div class="filter-section">
            <label for="complexity-filter">Max Complexity:</label>
            <select id="complexity-filter" name="max_complexity" class="complexity-select">
                <option value="easy">Easy only</option>
                <option value="medium">Medium & below</option>
                <option value="hard" selected>All (including hard)</option>
            </select>
        </div>

        <button class="btn"
                hx-get="/discover/search"
                hx-target="#recipe-results"
                hx-swap="innerHTML"
                hx-indicator="#search-spinner"
                hx-include="#complexity-filter">
            Surprise Me!
        </button>

        <span id="search-spinner" class="htmx-indicator">Searching...</span>
    </div>

    <div id="recipe-results" class="recipe-results">
        {% if message %}
        <p class="help-text">{{ message }}</p>
        {% endif %}
    </div>

    <div id="recipe-preview" class="recipe-preview"></div>
</div>
{% endblock %}
